<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Í∞ÑÎã®Ìïú TODO Ïï±</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: url('https://images.unsplash.com/photo-1506905925346-21bda4d32df4?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2070&q=80') center center / cover no-repeat fixed;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .container {
            background: white;
            border-radius: 10px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
            width: 100%;
            max-width: 500px;
            padding: 30px;
        }

        h1 {
            color: #333;
            margin-bottom: 20px;
            text-align: center;
        }

        .login-section {
            margin-bottom: 20px;
        }

        .login-section input {
            width: 70%;
            padding: 10px;
            border: 2px solid #ddd;
            border-radius: 5px;
            font-size: 14px;
        }

        .login-section button {
            width: 28%;
            padding: 10px;
            background: #667eea;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
            margin-left: 2%;
        }

        .login-section button:hover {
            background: #5568d3;
        }

        .user-info {
            margin-bottom: 15px;
            padding: 10px;
            background: #f0f0f0;
            border-radius: 5px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .user-info span {
            color: #333;
            font-weight: bold;
        }

        .user-info button {
            padding: 5px 15px;
            background: #e74c3c;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 12px;
        }

        .user-info button:hover {
            background: #c0392b;
        }

        .todo-form {
            display: flex;
            margin-bottom: 20px;
        }

        .todo-form input {
            flex: 1;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 5px;
            font-size: 14px;
        }

        .todo-form input:focus {
            outline: none;
            border-color: #667eea;
        }

        .todo-form button {
            padding: 12px 20px;
            margin-left: 10px;
            background: #667eea;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
        }

        .todo-form button:hover {
            background: #5568d3;
        }

        .todo-list {
            list-style: none;
        }

        .todo-item {
            display: flex;
            align-items: center;
            padding: 12px;
            margin-bottom: 10px;
            background: #f9f9f9;
            border-radius: 5px;
            border-left: 4px solid #667eea;
        }

        .todo-item.completed {
            opacity: 0.6;
            border-left-color: #27ae60;
        }

        .todo-item.completed .todo-text {
            text-decoration: line-through;
            color: #999;
        }

        .todo-checkbox {
            margin-right: 12px;
            width: 20px;
            height: 20px;
            cursor: pointer;
        }

        .todo-text {
            flex: 1;
            color: #333;
            font-size: 14px;
        }

        .todo-delete {
            padding: 6px 12px;
            background: #e74c3c;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 12px;
        }

        .todo-delete:hover {
            background: #c0392b;
        }

        .empty-message {
            text-align: center;
            color: #999;
            padding: 40px;
            font-style: italic;
        }

        .hidden {
            display: none;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üìù TODO Ïï±</h1>
        
        <!-- Î°úÍ∑∏Ïù∏ ÏÑπÏÖò -->
        <div id="loginSection" class="login-section">
            <input type="text" id="usernameInput" placeholder="ÏÇ¨Ïö©Ïûê Ïù¥Î¶ÑÏùÑ ÏûÖÎ†•ÌïòÏÑ∏Ïöî" />
            <button onclick="login()">Î°úÍ∑∏Ïù∏</button>
        </div>

        <!-- ÏÇ¨Ïö©Ïûê Ï†ïÎ≥¥ Î∞è Î°úÍ∑∏ÏïÑÏõÉ -->
        <div id="userInfo" class="user-info hidden">
            <span>ÏïàÎÖïÌïòÏÑ∏Ïöî, <strong id="currentUser"></strong>Îãò!</span>
            <button onclick="logout()">Î°úÍ∑∏ÏïÑÏõÉ</button>
        </div>

        <!-- TODO ÏûÖÎ†• Ìèº -->
        <div id="todoSection" class="hidden">
            <div class="todo-form">
                <input type="text" id="todoInput" placeholder="ÏÉàÎ°úÏö¥ TODOÎ•º ÏûÖÎ†•ÌïòÏÑ∏Ïöî" />
                <button onclick="addTodo()">Ï∂îÍ∞Ä</button>
            </div>

            <!-- TODO Î¶¨Ïä§Ìä∏ -->
            <ul id="todoList" class="todo-list"></ul>
        </div>
    </div>

    <script>
        // ÌòÑÏû¨ ÏÇ¨Ïö©Ïûê Ï†ïÎ≥¥
        let currentUser = localStorage.getItem('currentUser');

        // ÌéòÏù¥ÏßÄ Î°úÎìú Ïãú Ï¥àÍ∏∞Ìôî
        window.onload = function() {
            if (currentUser) {
                showTodoSection(currentUser);
            } else {
                showLoginSection();
            }
        };

        // Î°úÍ∑∏Ïù∏ Ìï®Ïàò
        function login() {
            const username = document.getElementById('usernameInput').value.trim();
            if (username === '') {
                alert('ÏÇ¨Ïö©Ïûê Ïù¥Î¶ÑÏùÑ ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî.');
                return;
            }
            currentUser = username;
            localStorage.setItem('currentUser', username);
            showTodoSection(username);
        }

        // Î°úÍ∑∏ÏïÑÏõÉ Ìï®Ïàò
        function logout() {
            currentUser = null;
            localStorage.removeItem('currentUser');
            document.getElementById('usernameInput').value = '';
            showLoginSection();
        }

        // Î°úÍ∑∏Ïù∏ ÏÑπÏÖò ÌëúÏãú
        function showLoginSection() {
            document.getElementById('loginSection').classList.remove('hidden');
            document.getElementById('userInfo').classList.add('hidden');
            document.getElementById('todoSection').classList.add('hidden');
        }

        // TODO ÏÑπÏÖò ÌëúÏãú
        function showTodoSection(username) {
            document.getElementById('loginSection').classList.add('hidden');
            document.getElementById('userInfo').classList.remove('hidden');
            document.getElementById('todoSection').classList.remove('hidden');
            document.getElementById('currentUser').textContent = username;
            loadTodos();
        }

        // TODO Ï∂îÍ∞Ä Ìï®Ïàò
        function addTodo() {
            const todoInput = document.getElementById('todoInput');
            const todoText = todoInput.value.trim();
            
            if (todoText === '') {
                alert('TODO ÎÇ¥Ïö©ÏùÑ ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî.');
                return;
            }

            const todos = getTodos();
            const newTodo = {
                id: Date.now(),
                text: todoText,
                completed: false
            };
            todos.push(newTodo);
            saveTodos(todos);
            todoInput.value = '';
            renderTodos();
        }

        // TODO ÏôÑÎ£å/ÎØ∏ÏôÑÎ£å ÌÜ†Í∏Ä
        function toggleTodo(id) {
            const todos = getTodos();
            const todo = todos.find(t => t.id === id);
            if (todo) {
                todo.completed = !todo.completed;
                saveTodos(todos);
                renderTodos();
            }
        }

        // TODO ÏÇ≠Ï†ú Ìï®Ïàò
        function deleteTodo(id) {
            if (confirm('Ïù¥ TODOÎ•º ÏÇ≠Ï†úÌïòÏãúÍ≤†ÏäµÎãàÍπå?')) {
                const todos = getTodos();
                const filteredTodos = todos.filter(t => t.id !== id);
                saveTodos(filteredTodos);
                renderTodos();
            }
        }

        // Î°úÏª¨ Ïä§ÌÜ†Î¶¨ÏßÄÏóêÏÑú TODO Í∞ÄÏ†∏Ïò§Í∏∞
        function getTodos() {
            if (!currentUser) return [];
            const todosJson = localStorage.getItem(`todos_${currentUser}`);
            return todosJson ? JSON.parse(todosJson) : [];
        }

        // Î°úÏª¨ Ïä§ÌÜ†Î¶¨ÏßÄÏóê TODO Ï†ÄÏû•
        function saveTodos(todos) {
            if (!currentUser) return;
            localStorage.setItem(`todos_${currentUser}`, JSON.stringify(todos));
        }

        // TODO Î¶¨Ïä§Ìä∏ Î†åÎçîÎßÅ
        function renderTodos() {
            const todoList = document.getElementById('todoList');
            const todos = getTodos();

            if (todos.length === 0) {
                todoList.innerHTML = '<li class="empty-message">TODOÍ∞Ä ÏóÜÏäµÎãàÎã§. ÏÉàÎ°úÏö¥ TODOÎ•º Ï∂îÍ∞ÄÌï¥Î≥¥ÏÑ∏Ïöî!</li>';
                return;
            }

            todoList.innerHTML = todos.map(todo => `
                <li class="todo-item ${todo.completed ? 'completed' : ''}">
                    <input type="checkbox" class="todo-checkbox" ${todo.completed ? 'checked' : ''} 
                           onchange="toggleTodo(${todo.id})" />
                    <span class="todo-text">${escapeHtml(todo.text)}</span>
                    <button class="todo-delete" onclick="deleteTodo(${todo.id})">ÏÇ≠Ï†ú</button>
                </li>
            `).join('');
        }

        // TODO Î°úÎìú Ìï®Ïàò
        function loadTodos() {
            renderTodos();
        }

        // HTML Ïù¥Ïä§ÏºÄÏù¥ÌîÑ Ìï®Ïàò (XSS Î∞©ÏßÄ)
        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

        // Enter ÌÇ§Î°ú TODO Ï∂îÍ∞Ä
        document.addEventListener('DOMContentLoaded', function() {
            const todoInput = document.getElementById('todoInput');
            const usernameInput = document.getElementById('usernameInput');

            if (todoInput) {
                todoInput.addEventListener('keypress', function(e) {
                    if (e.key === 'Enter') {
                        addTodo();
                    }
                });
            }

            if (usernameInput) {
                usernameInput.addEventListener('keypress', function(e) {
                    if (e.key === 'Enter') {
                        login();
                    }
                });
            }
        });
    </script>
</body>
</html>

